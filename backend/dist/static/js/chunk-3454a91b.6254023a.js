(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3454a91b"],{"6b70":function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"a",(function(){return i})),o.d(e,"c",(function(){return s}));var r=o("b775");function a(t){return Object(r["a"])({url:"/tool/localStorage/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/tool/localStorage/"+t,method:"delete"})}function s(t){return Object(r["a"])({url:"/tool/localStorage",method:"put",data:t})}},afd2:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"before-close":t.cancel,visible:t.open,title:t.isAdd?"上传文件":"编辑文件",width:"500px"},on:{"update:visible":function(e){t.open=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"small","label-width":"80px"}},[o("el-form-item",{attrs:{label:"文件名"}},[o("el-input",{staticStyle:{width:"370px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t.isAdd?o("el-form-item",{attrs:{label:"上传"}},[o("el-upload",{ref:"upload",attrs:{limit:1,"before-upload":t.beforeUpload,"auto-upload":!1,headers:t.headers,"on-success":t.handleSuccess,"on-error":t.handleError,action:t.fileUploadApi+"?name="+t.form.name}},[o("div",[o("i",{staticClass:"el-icon-upload"}),t._v(" 添加文件")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("可上传任意格式文件，且不超过100M")])])],1):t._e()],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.submitForm}},[t._v("确认")])],1)],1)},a=[],i=o("5f87"),s=o("6b70"),n={props:{isAdd:{type:Boolean,required:!0}},data:function(){return{loading:!1,open:!1,fileUploadApi:"/prod-api/tool/localStorage",headers:{Authorization:"Bearer "+Object(i["a"])()},form:{id:"",name:""},rules:{}}},methods:{cancel:function(){this.resetForm()},submitForm:function(){this.loading=!0,this.isAdd?this.$refs.upload.submit():this.handleUpdate()},handleUpdate:function(){var t=this;Object(s["c"])(this.form).then((function(e){t.resetForm(),t.msgSuccess("修改成功"),t.loading=!1,t.$parent.getList()})).catch((function(e){t.loading=!1,console.log(e.response.data.message)}))},resetForm:function(){this.open=!1,this.$refs["form"].resetFields(),this.form={id:"",name:""}},beforeUpload:function(t){var e=!0;return e=t.size/1024/1024<100,e||this.msgError("上传文件大小不能超过 100MB!"),this.loading=!1,e},handleSuccess:function(t,e,o){this.open=!1,this.resetForm(),this.$refs.upload.clearFiles(),this.$parent.getList()},handleError:function(t,e,o){var r=JSON.parse(t.msg);this.msgError(r),this.loading=!1}}},l=n,c=o("2877"),d=Object(c["a"])(l,r,a,!1,null,"2712a589",null);e["default"]=d.exports}}]);